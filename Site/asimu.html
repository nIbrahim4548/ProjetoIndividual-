<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulação de Motores Diversos - Realista</title>
<style>
body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
display: flex;
justify-content: center;
align-items: center;
height: 100vh;
margin: 0;
background-color: #2c3e50;
color: #ecf0f1;
}
.container {
width: 90%;
max-width: 700px;
background-color: #34495e;
border-radius: 10px;
box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
padding: 30px;
text-align: center;
}
h1 {
color: #e67e22;
margin-bottom: 25px;
}
.config-area {
display: flex;
justify-content: space-around;
margin-bottom: 30px;
background-color: #2c3e50;
padding: 15px;
border-radius: 8px;
}
.config-item {
display: flex;
flex-direction: column;
align-items: center;
}
.config-item label {
font-size: 1em;
margin-bottom: 8px;
color: #bdc3c7;
}
.config-item select {
padding: 8px 15px;
border-radius: 5px;
background-color: #ecf0f1;
color: #2c3e50;
border: none;
cursor: pointer;
}
.pedal-area {
margin-top: 30px;
}
.pedal-label {
font-size: 1.2em;
margin-bottom: 10px;
color: #3498db;
}
.acelerador {
width: 100%;
-webkit-appearance: none;
height: 15px;
border-radius: 5px;
background: #d3d3d3;
outline: none;
opacity: 0.7;
transition: opacity .2s;
margin-top: 10px;
}
.acelerador:hover {
opacity: 1;
}
.acelerador::-webkit-slider-thumb {
-webkit-appearance: none;
appearance: none;
width: 25px;
height: 25px;
border-radius: 50%;
background: #e67e22;
cursor: pointer;
}
.dados-motor {
margin-top: 40px;
display: flex;
justify-content: space-around;
text-align: center;
}
.motor-info {
background-color: #2c3e50;
padding: 20px;
border-radius: 8px;
width: 30%;
min-width: 150px;
}
.motor-info h2 {
margin-top: 0;
color: #2ecc71;
font-size: 1.1em;
}
#rpm, #torque, #potencia {
font-size: 1.8em;
font-weight: bold;
color: #e67e22;
margin-top: 10px;
}
.unidade {
font-size: 0.8em;
color: #bdc3c7;
display: block;
}
#turboPressureContainer.hidden {
display: none; /* Agora esconde completamente */
}
.performance-note {
margin-top: 15px;
font-size: 0.9em;
color: #bdc3c7;
}
</style>
</head>
<body>
<div class="container">
<h1 id="motorTitle">Simulador de Motores Automotivos</h1>

<div class="config-area">
<div class="config-item">
<label for="motorSelector">Selecione o Motor</label>
<select id="motorSelector">
<option value="EA888_20T">VW/Audi EA888 2.0 TSI</option>
<option value="EA113_18T">VW/Audi EA113 1.8 20V T</option>
<option value="OPALA_6C">GM Opala 6 Cilindros 4.1</option>
</select>
</div>
<div class="config-item" id="turboPressureContainer">
<label for="turboPressure">Configuração (Turbina)</label>
<select id="turboPressure">
</select>
</div>
</div>

<div class="pedal-area">
<div class="pedal-label">Pedal do Acelerador</div>
<input type="range" min="0" max="100" value="0" class="acelerador" id="aceleradorPedal">
</div>

<div class="dados-motor">
<div class="motor-info">
<h2>RPM</h2>
<div id="rpm">0 <span class="unidade">RPM</span></div>
</div>
<div class="motor-info">
<h2>Torque</h2>
<div id="torque">0 <span class="unidade">Nm</span></div>
</div>
<div class="motor-info">
<h2>Potência</h2>
<div id="potencia">0 <span class="unidade">cv</span></div>
</div>
</div>
<div class="performance-note" id="performanceNote"></div>
</div>

<script>
// Fator de conversão: 1 kW ≈ 1.35962 cv (cavalo-vapor)
const CV_PER_KW = 1.35962;

// --- DADOS DOS MOTORES (Torque em Nm) ---
const motorsData = {
// Referência: VW/Audi EA888 2.0 TSI (Ex: Golf GTI Mk7 - 220cv / 350 Nm)
"EA888_20T": {
name: "VW/Audi EA888 2.0 TSI (Injeção Direta)",
isTurbo: true,
maxRPM: 6500,
curves: {
"Original (Pequena)": {
// Turbo IHI, spool rápido
maxHp: 220, maxNm: 350,
points: [
{ rpm: 0, torque: 0 },
{ rpm: 1500, torque: 340 },
{ rpm: 2500, torque: 350 }, // Pico de torque precoce e plano
{ rpm: 4500, torque: 300 },
{ rpm: 6000, torque: 240 },
{ rpm: 6500, torque: 200 }
]
},
"Stage 2 (Média)": {
// Upgrade K04/IHI híbrida. Mais torque em alta, spool um pouco mais lento.
maxHp: 320, maxNm: 450,
points: [
{ rpm: 0, torque: 0 },
{ rpm: 1500, torque: 150 },
{ rpm: 2500, torque: 380 },
{ rpm: 3500, torque: 450 }, // Pico
{ rpm: 5500, torque: 400 },
{ rpm: 6500, torque: 340 }
]
}
}
},

// Referência: VW/Audi EA113 1.8 20V T (Ex: Golf/Audi A3 180cv / 235 Nm)
"EA113_18T": {
name: "VW/Audi EA113 1.8 20V T (Injeção Indireta)",
isTurbo: true,
maxRPM: 7000,
curves: {
"Original K03 (Pequena)": {
// Turbo K03, spool muito rápido
maxHp: 180, maxNm: 235,
points: [
{ rpm: 0, torque: 0 },
{ rpm: 1500, torque: 180 },
{ rpm: 2500, torque: 235 }, // Pico de torque
{ rpm: 4000, torque: 200 },
{ rpm: 5500, torque: 160 },
{ rpm: 7000, torque: 110 }
]
},
"Stage 3 GT28/30 (Grande)": {
// Turbo GT28/GT30. Alto pico de potência em alta RPM, alto lag.
maxHp: 450, maxNm: 500,
points: [
{ rpm: 0, torque: 0 },
{ rpm: 2500, torque: 100 },
{ rpm: 3500, torque: 250 }, // Saída do lag
{ rpm: 4500, torque: 500 }, // Pico
{ rpm: 6000, torque: 450 },
{ rpm: 7000, torque: 400 }
]
}
}
},

// Referência: GM Opala 6 Cilindros 4.1 (250-S - 171 cv SAE / 318 Nm)
"OPALA_6C": {
name: "GM Opala 6 Cilindros 4.1",
isTurbo: false,
maxRPM: 5500,
curves: {
"Aspirado (Original)": {
// Motor de torque em baixa RPM
maxHp: 171, maxNm: 318,
points: [
{ rpm: 0, torque: 0 },
{ rpm: 1000, torque: 250 },
{ rpm: 2500, torque: 318 }, // Pico de torque em baixa RPM
{ rpm: 4000, torque: 280 },
{ rpm: 5000, torque: 200 },
{ rpm: 5500, torque: 150 }
]
}
}
}
};

// --- ELEMENTOS DA INTERFACE ---
const pedal = document.getElementById('aceleradorPedal');
const rpmDisplay = document.getElementById('rpm');
const torqueDisplay = document.getElementById('torque');
const potenciaDisplay = document.getElementById('potencia');
const motorSelector = document.getElementById('motorSelector');
const turboSelector = document.getElementById('turboPressure');
const turboContainer = document.getElementById('turboPressureContainer');
const motorTitle = document.getElementById('motorTitle');
const performanceNote = document.getElementById('performanceNote');
let currentMotorID = motorSelector.value;

// --- FUNÇÕES DE CÁLCULO ---

// Mapeia a posição do pedal (0-100) para o RPM (0-maxRPM do motor)
function getRPMFromPedal(pedalValue, maxRPM) {
return (pedalValue / 100) * maxRPM;
}

// Interpola a curva de torque para encontrar o valor em um RPM específico
function getTorqueAtRPM(rpm, curvePoints) {
if (rpm <= 0) return 0;

const maxRpmCurve = curvePoints[curvePoints.length - 1].rpm;

if (rpm >= maxRpmCurve) {
return curvePoints[curvePoints.length - 1].torque;
}

for (let i = 0; i < curvePoints.length - 1; i++) {
const p1 = curvePoints[i];
const p2 = curvePoints[i + 1];
if (rpm >= p1.rpm && rpm < p2.rpm) {
// Interpolação linear
const ratio = (rpm - p1.rpm) / (p2.rpm - p1.rpm);
return p1.torque + ratio * (p2.torque - p1.torque);
}
}
return 0;
}

// Converte torque (Nm) e RPM para potência (cv)
function calculatePower(torqueNm, rpm) {
// P(kW) = T(Nm) * RPM * pi / 30000
const potenciaKW = (torqueNm * rpm * Math.PI) / 30000;
return potenciaKW * CV_PER_KW; // P(cv)
}

// --- FUNÇÕES DE INTERFACE E LÓGICA ---
function setupTurboSelector(motorID) {
const motor = motorsData[motorID];
// Limpa e preenche opções
turboSelector.innerHTML = '';

for (const configName in motor.curves) {
const option = document.createElement('option');
option.value = configName;
option.textContent = configName;
turboSelector.appendChild(option);
}

// Mostra/Esconde seletor de turbo
if (motor.isTurbo && Object.keys(motor.curves).length > 1) {
turboContainer.style.display = 'flex';
} else {
turboContainer.style.display = 'none';
}
// Seleciona o primeiro item por padrão
turboSelector.value = Object.keys(motor.curves)[0];
}

// Função principal para atualizar todos os dados do motor
function updateMotorData() {
const motor = motorsData[currentMotorID];
const maxRPM = motor.maxRPM;
// 1. Determina a curva de torque a ser usada
const selectedConfig = turboSelector.value;
const currentConfig = motor.curves[selectedConfig];
const currentCurvePoints = currentConfig.points;

// 2. Calcula RPM, Torque e Potência
const pedalValue = parseFloat(pedal.value);
const currentRPM = getRPMFromPedal(pedalValue, maxRPM);
const currentTorque = getTorqueAtRPM(currentRPM, currentCurvePoints);
const currentPower = calculatePower(currentTorque, currentRPM);
// 3. Atualiza a interface
motorTitle.textContent = "Simulador: " + motor.name;
rpmDisplay.textContent = currentRPM.toFixed(0);
torqueDisplay.textContent = currentTorque.toFixed(2);
potenciaDisplay.textContent = currentPower.toFixed(2);

// 4. Atualiza nota de performance
performanceNote.textContent = `Configuração: ${selectedConfig}. Potência Máxima Estimada: ${currentConfig.maxHp} cv | Torque Máximo: ${currentConfig.maxNm} Nm.`;
}

function handleMotorChange() {
currentMotorID = motorSelector.value;
setupTurboSelector(currentMotorID);
updateMotorData(); // Recalcula com a nova curva
}


// --- EVENT LISTENERS ---

// Escuta a mudança no pedal (input)
pedal.addEventListener('input', updateMotorData);

// Escuta a mudança na configuração/turbina (change)
turboSelector.addEventListener('change', updateMotorData);

// Escuta a mudança do motor (change)
motorSelector.addEventListener('change', handleMotorChange);
// --- INICIALIZAÇÃO ---
document.addEventListener('DOMContentLoaded', () => {
handleMotorChange();
});
</script>
</body>
</html>
