<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../extras.css">
<title>Simulação de Motores Diversos - Realista</title>
<style>
:root {
    --bg-dark: #050608;
    --bg-panel: #121317;
    --bg-panel-soft: #1b1d24;
    --accent-red: #e50914;
    --accent-red-soft: #ff3344;
    --text-main: #f5f5f5;
    --text-muted: #b0b3c0;
    --border-soft: #2b2e38;
}

/* Layout geral */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: radial-gradient(circle at top, #20222b 0, #050608 55%);
    color: var(--text-main);
    box-sizing: border-box;
}

.container {
    width: 100%;
    max-width: 1100px;
    background: linear-gradient(135deg, #101116 0, #171921 40%, #101116 100%);
    border-radius: 18px;
    box-shadow: 0 25px 40px rgba(0, 0, 0, 0.7);
    padding: 28px 28px 32px;
    box-sizing: border-box;
    border: 1px solid rgba(255, 255, 255, 0.04);
}

/* Cabeçalho */
h1 {
    margin: 0 0 22px;
    font-size: 1.8rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--text-main);
    display: flex;
    align-items: center;
    gap: 10px;
}
h1::before {
    content: '';
    width: 8px;
    height: 26px;
    border-radius: 999px;
    background: linear-gradient(180deg, var(--accent-red-soft), var(--accent-red));
}

/* Área de configuração */
.config-area {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: 26px;
}

.config-item {
    flex: 1 1 240px;
    background: var(--bg-panel);
    border-radius: 12px;
    padding: 14px 16px;
    border: 1px solid var(--border-soft);
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.config-item label {
    font-size: 0.88rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
}

.config-item select {
    padding: 10px 14px;
    border-radius: 10px;
    border: 1px solid var(--border-soft);
    background: #0c0d10;
    color: var(--text-main);
    cursor: pointer;
    font-size: 0.95rem;
    outline: none;
    transition: border 0.2s, box-shadow 0.2s, background 0.2s;
}
.config-item select:focus,
.config-item select:hover {
    border-color: var(--accent-red-soft);
    box-shadow: 0 0 0 1px rgba(229, 9, 20, 0.55);
    background: #14151b;
}

/* Controle de RPM (slider) */
.pedal-area {
    margin-top: 14px;
    background: var(--bg-panel);
    border-radius: 12px;
    padding: 16px 18px 20px;
    border: 1px solid var(--border-soft);
}

.pedal-label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--text-muted);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.pedal-label span.valor-rpm {
    font-size: 0.95rem;
    color: var(--accent-red-soft);
    font-weight: 600;
}

.acelerador {
    width: 100%;
    -webkit-appearance: none;
    appearance: none;
    height: 8px;
    border-radius: 999px;
    background: #282a34;
    outline: none;
    margin-top: 16px;
    position: relative;
}
.acelerador::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(90deg, #5af770 0, #f7dd4a 40%, var(--accent-red) 100%);
    mask: linear-gradient(90deg, #000 calc(var(--value, 0) * 1%), transparent 0);
}

.acelerador::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #ffffff, #e4e4e4 45%, #999 100%);
    border: 2px solid var(--accent-red);
    box-shadow: 0 0 0 4px rgba(229, 9, 20, 0.25);
    cursor: pointer;
    position: relative;
}
.acelerador::-moz-range-thumb {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #ffffff;
    border: 2px solid var(--accent-red);
    box-shadow: 0 0 0 4px rgba(229, 9, 20, 0.25);
    cursor: pointer;
}

/* Cards de dados do motor */
.dados-motor {
    margin-top: 28px;
    display: grid;
    grid-template-columns: 1.2fr 1.2fr 1fr;
    gap: 18px;
}

.motor-info {
    background: var(--bg-panel-soft);
    padding: 18px 16px 20px;
    border-radius: 14px;
    border: 1px solid var(--border-soft);
    text-align: left;
    position: relative;
    overflow: hidden;
}
.motor-info h2 {
    margin: 0;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
}

/* Destaque específico para Torque e Potência */
.motor-info.destaque {
    border-color: rgba(229, 9, 20, 0.6);
    box-shadow: 0 0 25px rgba(229, 9, 20, 0.18);
    background: radial-gradient(circle at top left, rgba(229, 9, 20, 0.25), transparent 55%), var(--bg-panel-soft);
}
.motor-info.destaque::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(229, 9, 20, 0.15), transparent 55%);
    opacity: 0.7;
    pointer-events: none;
}
.motor-info.destaque h2 {
    color: #ffdede;
}

/* Valores numéricos */
#rpm, #torque, #potencia {
    margin-top: 10px;
    font-weight: 700;
}

#rpm {
    font-size: 1.4rem;
    color: #ffffff;
}
#torque, #potencia {
    font-size: 2.0rem;
    color: var(--accent-red-soft);
}

.unidade {
    display: block;
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Nota de performance */
.performance-note {
    margin-top: 18px;
    font-size: 0.9rem;
    color: var(--text-muted);
    padding-top: 6px;
    border-top: 1px solid rgba(255, 255, 255, 0.04);
}

/* Responsivo */
@media (max-width: 840px) {
    .dados-motor {
        grid-template-columns: 1fr;
    }
    .motor-info {
        text-align: center;
    }
}

@media (max-width: 600px) {
    .container {
        padding: 20px 16px 24px;
    }
    h1 {
        font-size: 1.4rem;
    }
}
</style>

</head>
<body>
    <header class="topbar">
        <nav class="menu-header">
            <ul class="menu-list">
                <li class="selects-animated">
                    <a href="#" class="selects-links">Inicio</a>
                    <ul class="links-usuario1">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="../autenticacao/cadastro.html">Cadastro</a></li>
                        <li><a href="../autenticacao/login.html">Login</a></li>
                    </ul>
                </li>
                <li class="selects-animated2">
                    <a href="#" class="selects-links">Mecânica</a>
                    <ul class="links-header">
                        <li><a href="../mecanica/motores.html">Motores</a></li>
                        <li><a href="../mecanica/injecao.html">Injeção</a></li>
                        <li><a href="../mecanica/cambio.html">Câmbio</a></li>
                    </ul>
                </li>

                <li class="selects-animated3">
                    <a href="#" class="selects-links">Sistemas de sobrealimentação</a>
                    <ul class="links-usuario2">
                        <li><a href="../sobrealimentacao/turbocompressor.html">Turbocompressores:</a></li>
                    </ul>
                </li>


                <li class="selects-animated4">
                    <a href="#" class="selects-links">Simulação</a>
                    <ul class="links-usuario3">
                        <li><a href="../simulacao/motores.html">Motores</a></li>
                        <li><a href="../simulacao/descubraCarro.html">Descubra seu carro!</a></li>
                    </ul>
                </li>


            </ul>
        </nav>
    </header>
<div class="container">
    <h1 id="motorTitle">Simulador de Motores Automotivos</h1> 

    <div class="config-area">
        <div class="config-item">
            <label for="motorSelector">Selecione o Motor</label>
            <select id="motorSelector">
                <option value="EA888_20T">VW/Audi EA888 2.0 TSI</option>
                <option value="EA113_18T">VW/Audi EA113 1.8 20V T</option>
                <option value="OPALA_6C">GM Opala 6 Cilindros 4.1</option>
                <option value="AUDI_25T_DAZA">Audi 2.5 TFSI DAZA (RS3/TTRS)</option>
                <option value="TOYOTA_2JZ_GTE">Toyota 2JZ-GTE 3.0</option>
            </select>
        </div>
        <div class="config-item" id="turboPressureContainer">
            <label for="turboPressure">Configuração (Turbina)</label>
            <select id="turboPressure"></select>
        </div>
    </div>

    <div class="pedal-area">
        <div class="pedal-label">
            <span>RPM ATUAL</span>
            <span class="valor-rpm" id="rpmLabel">0 RPM</span>
        </div>
        <input type="range" min="0" max="100" value="0" class="acelerador" id="aceleradorPedal">
    </div>

    <div class="dados-motor">
        <div class="motor-info destaque">
            <h2>Torque</h2>
            <div id="torque">0 <span class="unidade">Nm</span></div>
        </div>
        <div class="motor-info destaque">
            <h2>Potência</h2>
            <div id="potencia">0 <span class="unidade">cv</span></div>
        </div>
        <div class="motor-info">
            <h2>Rotação</h2>
            <div id="rpm">0 <span class="unidade">RPM</span></div>
        </div>
    </div>

    <div class="performance-note" id="performanceNote"></div>
</div>
<script src="../script.js"></script>

<script>
// Fator de conversão: 1 kW ≈ 1.35962 cv
const FATOR_CV_POR_KW = 1.35962;

// --- BANCO DE MOTORES (Torque em Nm) ---
const bancoMotores = {
    "EA888_20T": {
        name: "VW/Audi EA888 2.0 TSI (Injeção Direta)",
        isTurbo: true,
        maxRPM: 6500,
        curves: {
            "Original (Pequena)": {
                maxHp: 220, maxNm: 350,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 1500, torque: 340 },
                    { rpm: 2500, torque: 350 },
                    { rpm: 4500, torque: 300 },
                    { rpm: 6000, torque: 240 },
                    { rpm: 6500, torque: 200 }
                ]
            },
            "Stage 2 (Média)": {
                maxHp: 320, maxNm: 450,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 1500, torque: 150 },
                    { rpm: 2500, torque: 380 },
                    { rpm: 3500, torque: 450 },
                    { rpm: 5500, torque: 400 },
                    { rpm: 6500, torque: 340 }
                ]
            }
        }
    },
    "EA113_18T": {
        name: "VW/Audi EA113 1.8 20V T (Injeção Indireta)",
        isTurbo: true,
        maxRPM: 7000,
        curves: {
            "Original K03 (Pequena)": {
                maxHp: 180, maxNm: 235,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 1500, torque: 180 },
                    { rpm: 2500, torque: 235 },
                    { rpm: 4000, torque: 200 },
                    { rpm: 5500, torque: 160 },
                    { rpm: 7000, torque: 110 }
                ]
            },
            "Stage 3 GT28/30 (Grande)": {
                maxHp: 450, maxNm: 500,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 2500, torque: 100 },
                    { rpm: 3500, torque: 250 },
                    { rpm: 4500, torque: 500 },
                    { rpm: 6000, torque: 450 },
                    { rpm: 7000, torque: 400 }
                ]
            }
        }
    },
    "OPALA_6C": {
        name: "GM Opala 6 Cilindros 4.1",
        isTurbo: false,
        maxRPM: 5500,
        curves: {
            "Aspirado (Original)": {
                maxHp: 171, maxNm: 318,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 1000, torque: 250 },
                    { rpm: 2500, torque: 318 },
                    { rpm: 4000, torque: 280 },
                    { rpm: 5000, torque: 200 },
                    { rpm: 5500, torque: 150 }
                ]
            }
        }
    },
    "AUDI_25T_DAZA": {
        name: "Audi 2.5 TFSI DAZA (RS3/TTRS)",
        isTurbo: true,
        maxRPM: 7000,
        curves: {
            "Original 400 cv (Turbina Pequena)": {
                maxHp: 400, maxNm: 480,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 2000, torque: 380 },
                    { rpm: 3000, torque: 480 },
                    { rpm: 5500, torque: 470 },
                    { rpm: 6500, torque: 430 },
                    { rpm: 7000, torque: 380 }
                ]
            },
            "Stage 2 500 cv (Média)": {
                maxHp: 500, maxNm: 600,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 2500, torque: 420 },
                    { rpm: 3500, torque: 600 },
                    { rpm: 5500, torque: 580 },
                    { rpm: 6500, torque: 540 },
                    { rpm: 7000, torque: 500 }
                ]
            },
            "Stage 3 650 cv (Grande)": {
                maxHp: 650, maxNm: 750,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 3000, torque: 350 },
                    { rpm: 4000, torque: 650 },
                    { rpm: 5500, torque: 750 },
                    { rpm: 6500, torque: 720 },
                    { rpm: 7000, torque: 680 }
                ]
            }
        }
    },
    "TOYOTA_2JZ_GTE": {
        name: "Toyota 2JZ-GTE 3.0 (Supra)",
        isTurbo: true,
        maxRPM: 7000,
        curves: {
            "Original Bi-Turbo": {
                maxHp: 280, maxNm: 440,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 2000, torque: 300 },
                    { rpm: 3500, torque: 440 },
                    { rpm: 4500, torque: 430 },
                    { rpm: 6000, torque: 360 },
                    { rpm: 7000, torque: 310 }
                ]
            },
            "Single Turbo 600 cv": {
                maxHp: 600, maxNm: 650,
                points: [
                    { rpm: 0, torque: 0 },
                    { rpm: 3000, torque: 250 },
                    { rpm: 4000, torque: 500 },
                    { rpm: 5500, torque: 650 },
                    { rpm: 6500, torque: 630 },
                    { rpm: 7000, torque: 580 }
                ]
            }
        }
    }
};

// ELEMENTOS (var, como você pediu)
var controlePedalAcelerador      = document.getElementById('aceleradorPedal');
var visorRPM                     = document.getElementById('rpm');
var visorTorque                  = document.getElementById('torque');
var visorPotencia                = document.getElementById('potencia');
var seletorMotor                 = document.getElementById('motorSelector');
var seletorConfiguracaoTurbo     = document.getElementById('turboPressure');
var containerConfiguracaoTurbo   = document.getElementById('turboPressureContainer');
var tituloSimuladorMotor         = document.getElementById('motorTitle');
var textoNotaPerformance         = document.getElementById('performanceNote');
var labelRPMAtual                = document.getElementById('rpmLabel');

var idMotorAtual = seletorMotor.value;

// Cálculo RPM pelo slider
function obterRPMDoPedal(valorPedal, rpmMaximo) {
    return (valorPedal / 100) * rpmMaximo;
}

// Interpola curva de torque
function obterTorqueEmRPM(rpm, pontosCurva) {
    if (rpm <= 0) return 0;
    var rpmMaximoCurva = pontosCurva[pontosCurva.length - 1].rpm;
    if (rpm >= rpmMaximoCurva) {
        return pontosCurva[pontosCurva.length - 1].torque;
    }
    for (var i = 0; i < pontosCurva.length - 1; i++) {
        var p1 = pontosCurva[i];
        var p2 = pontosCurva[i + 1];
        if (rpm >= p1.rpm && rpm < p2.rpm) {
            var proporcao = (rpm - p1.rpm) / (p2.rpm - p1.rpm);
            return p1.torque + proporcao * (p2.torque - p1.torque);
        }
    }
    return 0;
}

// Potência em cv
function calcularPotenciaEmCV(torqueNm, rpm) {
    var potenciaKW = (torqueNm * rpm * Math.PI) / 30000;
    return potenciaKW * FATOR_CV_POR_KW;
}

// Configura opções de turbina
function configurarSeletorTurbo(idMotor) {
    var motor = bancoMotores[idMotor];
    seletorConfiguracaoTurbo.innerHTML = '';
    for (var nomeConfig in motor.curves) {
        var opcao = document.createElement('option');
        opcao.value = nomeConfig;
        opcao.textContent = nomeConfig;
        seletorConfiguracaoTurbo.appendChild(opcao);
    }
    if (motor.isTurbo && Object.keys(motor.curves).length > 1) {
        containerConfiguracaoTurbo.style.display = 'flex';
    } else {
        containerConfiguracaoTurbo.style.display = 'none';
    }
    seletorConfiguracaoTurbo.value = Object.keys(motor.curves)[0];
}

// Atualiza tudo
function atualizarDadosMotor() {
    var motor = bancoMotores[idMotorAtual];
    var rpmMaximo = motor.maxRPM;

    var nomeConfigSelecionada = seletorConfiguracaoTurbo.value;
    var configuracaoAtual = motor.curves[nomeConfigSelecionada];
    var pontosCurvaAtual = configuracaoAtual.points;

    var valorPedal = parseFloat(controlePedalAcelerador.value);
    var rpmAtual = obterRPMDoPedal(valorPedal, rpmMaximo);
    var torqueAtual = obterTorqueEmRPM(rpmAtual, pontosCurvaAtual);
    var potenciaAtual = calcularPotenciaEmCV(torqueAtual, rpmAtual);

    tituloSimuladorMotor.textContent = "Simulador: " + motor.name;
    visorRPM.textContent = rpmAtual.toFixed(0);
    visorTorque.innerHTML = torqueAtual.toFixed(2) + ' <span class="unidade">Nm</span>';
    visorPotencia.innerHTML = potenciaAtual.toFixed(2) + ' <span class="unidade">cv</span>';
    labelRPMAtual.textContent = rpmAtual.toFixed(0) + ' RPM';

    // atualizar preenchimento visual do slider (Chrome)
    controlePedalAcelerador.style.setProperty('--value', valorPedal);

    textoNotaPerformance.textContent =
        "Configuração: " + nomeConfigSelecionada +
        ". Potência Máxima Estimada: " + configuracaoAtual.maxHp +
        " cv | Torque Máximo: " + configuracaoAtual.maxNm + " Nm.";
}

function aoTrocarMotor() {
    idMotorAtual = seletorMotor.value;
    configurarSeletorTurbo(idMotorAtual);
    atualizarDadosMotor();
}

// Eventos
controlePedalAcelerador.addEventListener('input', atualizarDadosMotor);
seletorConfiguracaoTurbo.addEventListener('change', atualizarDadosMotor);
seletorMotor.addEventListener('change', aoTrocarMotor);

// Inicialização
document.addEventListener('DOMContentLoaded', function () {
    aoTrocarMotor();
});
</script>
</body>
</html>
